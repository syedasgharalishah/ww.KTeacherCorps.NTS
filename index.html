<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDUCATION DEPARTMENT SCREENING TEST PREPARATION – JUNE 3, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 10vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #6D6875;
            margin-top: 0.5rem;
        }

        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }

        .option-button:hover:not(.selected) {
            background-color: #f0f0f0;
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        .timer-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-progress {
            font-size: 1rem;
            color: #6D6875;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
            }
            .top-bar .date-display {
                order: 2; /* Move date to bottom on mobile */
                font-size: 0.8rem;
            }
            .top-bar .whatsapp-link {
                order: 1; /* Move whatsapp to top on mobile */
                font-size: 0.8rem;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault()); // Disable right-click
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault(); // Disable Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J
            }
            if (e.key === 'F12') {
                e.preventDefault(); // Disable F12
            }
        });
        document.addEventListener('copy', event => event.preventDefault()); // Disable copy
        document.addEventListener('paste', event => event.preventDefault()); // Disable paste
    </script>

    <div class="top-bar">
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
        <div class="date-display" id="liveDate"></div>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/LXdkJVy8/20250524-0050-Empowering-Educators-remix-01jw0makvqewdvqns1te3jvpgs.png" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            KP Teacher Corps | PREPARED BY: SYED ASGHAR ALI SHAH | Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "JUNE 3, 2025"; // MANDATORY DAILY INPUT
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Update header dates
        document.getElementById('liveDate').textContent = CURRENT_DATE_STR;
        document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
        document.getElementById('quizTitle').textContent = `EDUCATION DEPARTMENT SCREENING TEST PREPARATION – ${CURRENT_DATE_STR}`;

        // Quiz Data Structure
        const quizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 40;
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "35 minutes 10 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date().toDateString();
            if (question.special && CURRENT_DATE.toDateString() === today) {
                quizCard.classList.add('special-question');
            }

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                button.dataset.optionIndex = index;
                button.onclick = () => selectOption(index);

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === index) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionIndex - The index of the selected option.
         */
        function selectOption(selectedOptionIndex) {
            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button, index) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('selected', 'correct', 'incorrect'); // Clear previous states

                if (index === selectedOptionIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.isCorrect) {
                    correctCount++;
                } else if (answer && answer.selectedOptionIndex !== undefined) {
                    incorrectCount++;
                }
            });

            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount} / ${userAnswers.length}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount} / ${userAnswers.length}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpojgab', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            if (id === '3june' && password === '1234') {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // Pedagogy (10 MCQs from Pages 29-32)
            const pedagogyMCQs = [
                { question: "Which of the following is a key component of effective communication in the classroom?", options: ["One-way lecture", "Active listening", "Ignoring non-verbal cues", "Using complex jargon"], correctOptionIndex: 1, explanation: "Active listening fosters better understanding and interaction (Page 29)." },
                { question: "What is the purpose of providing constructive feedback?", options: ["To criticize students", "To highlight only weaknesses", "To help learners understand their strengths and areas for improvement", "To discourage effort"], correctOptionIndex: 2, explanation: "Constructive feedback guides improvement by focusing on both strengths and areas needing development (Page 29)." },
                { question: "Which of the following describes a democratic leadership style in the classroom?", options: ["Teacher makes all decisions.", "Students have no say in activities.", "Teacher involves students in decision-making.", "Teacher is completely hands-off."], correctOptionIndex: 2, explanation: "A democratic style encourages student participation and shared responsibility (Page 30)." },
                { question: "What is the primary role of a school principal?", options: ["To teach all subjects.", "To manage the school's overall operations and provide educational leadership.", "To clean the school premises.", "To provide financial aid to students."], correctOptionIndex: 1, explanation: "The principal is responsible for the school's administration and academic direction (Page 30)." },
                { question: "Which of the following is a characteristic of a successful school?", options: ["Low parent involvement", "Clear vision and mission", "Frequent staff conflicts", "Lack of resources"], correctOptionIndex: 1, explanation: "A clear vision and mission provide direction and purpose (Page 31)." },
                { question: "What is the purpose of parent-teacher conferences?", options: ["To complain about students.", "To discuss student progress and collaborate on learning strategies.", "To assign homework to parents.", "To collect fees."], correctOptionIndex: 1, explanation: "Conferences facilitate communication and partnership between home and school (Page 31)." },
                { question: "Which of the following is a benefit of community involvement in schools?", options: ["Increased isolation of the school.", "Reduced resources for the school.", "Enhanced learning opportunities and support for students.", "Limited extracurricular activities."], correctOptionIndex: 2, explanation: "Community involvement brings resources, expertise, and support to schools (Page 32)." },
                { question: "What is the term for the process of evaluating the effectiveness of an educational program or intervention?", options: ["Assessment", "Instruction", "Evaluation", "Curriculum development"], correctOptionIndex: 2, explanation: "Evaluation systematically judges the worth or merit of a program (Page 32)." },
                { question: "Which of the following is a type of evaluation conducted during the implementation of a program to make ongoing adjustments?", options: ["Summative evaluation", "Formative evaluation", "Impact evaluation", "Outcome evaluation"], correctOptionIndex: 1, explanation: "Formative evaluation provides continuous feedback for improvement (Page 32)." },
                { question: "What is the purpose of summative evaluation?", options: ["To provide daily feedback.", "To make adjustments during a program.", "To determine the overall effectiveness of a program at its conclusion.", "To diagnose learning difficulties."], correctOptionIndex: 2, explanation: "Summative evaluation assesses overall achievement and effectiveness at the end (Page 32)." }
            ];
            quizQuestions.push(...pedagogyMCQs);

            // General Science (25 MCQs from Pages 207-224)
            const generalScienceMCQs = [
                { question: "What is the chemical symbol for Nitrogen?", options: ["Ni", "N", "Nr", "No"], correctOptionIndex: 1, explanation: "N is the chemical symbol for Nitrogen (Page 207)." },
                { question: "Which of the following is a mixture?", options: ["Water", "Salt", "Air", "Sugar"], correctOptionIndex: 2, explanation: "Air is a mixture of various gases like nitrogen, oxygen, etc. (Page 208)." },
                { question: "What is the process of separating insoluble solid particles from a liquid by passing it through a filter?", options: ["Evaporation", "Distillation", "Filtration", "Decantation"], correctOptionIndex: 2, explanation: "Filtration uses a filter to separate solids from liquids (Page 209)." },
                { question: "Which of the following methods is used to separate a mixture of sand and water?", options: ["Distillation", "Evaporation", "Filtration", "Chromatography"], correctOptionIndex: 2, explanation: "Filtration can separate insoluble solids like sand from water (Page 210)." },
                { question: "What is the process of separating components of a liquid mixture based on differences in their boiling points?", options: ["Filtration", "Evaporation", "Distillation", "Sublimation"], correctOptionIndex: 2, explanation: "Distillation separates liquids with different boiling points (Page 211)." },
                { question: "Which of the following is an example of a physical change?", options: ["Burning paper", "Digesting food", "Boiling water", "Rusting iron"], correctOptionIndex: 2, explanation: "Boiling water changes its state (liquid to gas) but not its chemical composition (Page 212)." },
                { question: "What is the Law of Conservation of Mass?", options: ["Mass can be created and destroyed.", "Mass is only created.", "Mass is only destroyed.", "Mass cannot be created or destroyed in a chemical reaction."], correctOptionIndex: 3, explanation: "The law states that mass is conserved in chemical reactions (Page 213)." },
                { question: "Which of the following is a chemical change?", options: ["Melting ice", "Dissolving sugar", "Baking a cake", "Cutting paper"], correctOptionIndex: 2, explanation: "Baking a cake involves chemical reactions that form new substances (Page 214)." },
                { question: "What is the process by which plants release water vapor into the atmosphere from their leaves?", options: ["Photosynthesis", "Respiration", "Transpiration", "Condensation"], correctOptionIndex: 2, explanation: "Transpiration is the evaporation of water from plant surfaces (Page 215)." },
                { question: "Which part of a plant absorbs water and nutrients from the soil?", options: ["Stem", "Leaves", "Roots", "Flowers"], correctOptionIndex: 2, explanation: "Roots anchor the plant and absorb water and minerals (Page 216)." },
                { question: "What is the primary function of the stem in a plant?", options: ["Producing flowers", "Absorbing water", "Supporting the plant and transporting substances", "Making food"], correctOptionIndex: 2, explanation: "The stem provides support and transports water and nutrients (Page 217)." },
                { question: "Which part of a flower contains the ovules, which develop into seeds after fertilization?", options: ["Petal", "Stamen", "Pistil (Carpel)", "Sepal"], correctOptionIndex: 2, explanation: "The pistil (or carpel) contains the ovary with ovules (Page 218)." },
                { question: "What is the transfer of pollen from the anther to the stigma?", options: ["Fertilization", "Germination", "Pollination", "Dispersal"], correctOptionIndex: 2, explanation: "Pollination is crucial for plant reproduction (Page 219)." },
                { question: "Which of the following is a method of asexual reproduction in plants?", options: ["Seed formation", "Pollination", "Vegetative propagation", "Fertilization"], correctOptionIndex: 2, explanation: "Vegetative propagation involves new plants growing from parts of the parent plant (Page 220)." },
                { question: "What is the process by which seeds begin to grow into new plants?", options: ["Pollination", "Fertilization", "Germination", "Photosynthesis"], correctOptionIndex: 2, explanation: "Germination is the sprouting of a seed (Page 221)." },
                { question: "Which of the following is a factor necessary for seed germination?", options: ["Darkness", "Cold temperature", "Water", "Strong wind"], correctOptionIndex: 2, explanation: "Water is essential for activating enzymes and breaking dormancy (Page 222)." },
                { question: "What is the primary function of leaves in a plant?", options: ["Anchoring the plant", "Producing flowers", "Making food through photosynthesis", "Transporting water"], correctOptionIndex: 2, explanation: "Leaves are the main sites of photosynthesis (Page 223)." },
                { question: "Which gas do plants absorb from the atmosphere for photosynthesis?", options: ["Oxygen", "Nitrogen", "Carbon dioxide", "Hydrogen"], correctOptionIndex: 2, explanation: "Plants use carbon dioxide in photosynthesis (Page 224)." },
                { question: "What is the chemical symbol for Iron?", options: ["Ir", "Fe", "Io", "In"], correctOptionIndex: 1, explanation: "Fe is the chemical symbol for Iron (Page 207)." },
                { question: "Which type of mixture has components that are not uniformly distributed and can be easily distinguished?", options: ["Homogeneous mixture", "Heterogeneous mixture", "Solution", "Compound"], correctOptionIndex: 1, explanation: "Heterogeneous mixtures have visible distinct components (Page 208)." },
                { question: "Which separation technique would you use to separate salt from water?", options: ["Filtration", "Decantation", "Distillation", "Magnetism"], correctOptionIndex: 2, explanation: "Distillation separates dissolved solids from liquids by boiling and condensing (Page 211)." },
                { question: "What is the primary energy source for photosynthesis?", options: ["Chemical energy", "Heat energy", "Light energy", "Mechanical energy"], correctOptionIndex: 2, explanation: "Photosynthesis directly uses light energy from the sun (Page 215)." },
                { question: "Which part of the flower produces pollen?", options: ["Stigma", "Style", "Anther", "Ovary"], correctOptionIndex: 2, explanation: "The anther is part of the stamen and produces pollen (Page 218)." },
                { question: "Which of the following is a common method of seed dispersal?", options: ["Germination", "Pollination", "Wind dispersal", "Photosynthesis"], correctOptionIndex: 2, explanation: "Wind, water, and animals are common agents of seed dispersal (Page 220)." },
                { question: "What is the primary product of photosynthesis that serves as food for the plant?", options: ["Oxygen", "Water", "Glucose", "Carbon dioxide"], correctOptionIndex: 2, explanation: "Glucose is the sugar produced by plants for energy (Page 223)." }
            ];
            quizQuestions.push(...generalScienceMCQs);

            // Social Studies (15 MCQs from Pages 561-578)
            const socialStudiesMCQs = [
                { question: "Which of the following is a major challenge to Pakistan's economic development?", options: ["High literacy rate", "Political instability and corruption", "Abundant natural resources", "Strong industrial base"], correctOptionIndex: 1, explanation: "Political instability and corruption hinder economic growth (Page 561)." },
                { question: "What is the term for the total value of goods and services produced by a country's residents, both domestically and abroad?", options: ["GDP", "GNP", "Inflation", "Deflation"], correctOptionIndex: 1, explanation: "Gross National Product (GNP) includes income from abroad (Page 562)." },
                { question: "Which of the following is a major source of revenue for the government of Pakistan?", options: ["Foreign aid only", "Taxes", "Donations from NGOs", "Printing more currency"], correctOptionIndex: 1, explanation: "Taxes are a primary source of government revenue (Page 563)." },
                { question: "What is the term for the general increase in prices and fall in the purchasing value of money?", options: ["Deflation", "Recession", "Inflation", "Stagnation"], correctOptionIndex: 2, explanation: "Inflation means money buys less over time (Page 564)." },
                { question: "Which of the following is a measure to control inflation?", options: ["Printing more money", "Increasing government spending", "Raising interest rates", "Reducing taxes"], correctOptionIndex: 2, explanation: "Raising interest rates can curb inflation by reducing borrowing and spending (Page 565)." },
                { question: "What is the primary purpose of a budget?", options: ["To track daily expenses only.", "To plan and allocate financial resources for future periods.", "To hide financial information.", "To generate debt."], correctOptionIndex: 1, explanation: "A budget is a financial plan (Page 566)." },
                { question: "Which of the following is a major challenge to the education sector in Pakistan?", options: ["High enrollment rates", "Low budget allocation and poor quality of education", "Abundant qualified teachers", "Modern infrastructure"], correctOptionIndex: 1, explanation: "Insufficient funding and quality issues are significant challenges (Page 567)." },
                { question: "What is the purpose of vocational education?", options: ["To prepare students for university only.", "To provide practical skills for specific trades and professions.", "To teach theoretical knowledge only.", "To promote abstract thinking."], correctOptionIndex: 1, explanation: "Vocational education focuses on job-specific skills (Page 568)." },
                { question: "Which of the following is a major health issue in Pakistan?", options: ["High life expectancy", "Widespread access to clean water", "Malnutrition and infectious diseases", "Excellent healthcare infrastructure"], correctOptionIndex: 2, explanation: "Malnutrition and preventable diseases remain prevalent (Page 569)." },
                { question: "What is the purpose of public health initiatives?", options: ["To treat individual patients only.", "To prevent disease and promote health at a community level.", "To increase hospital profits.", "To discourage healthy lifestyles."], correctOptionIndex: 1, explanation: "Public health focuses on population-level health improvement (Page 570)." },
                { question: "Which of the following is a major environmental issue in Pakistan?", options: ["Clean air", "Deforestation and water pollution", "Abundant green spaces", "Sustainable resource management"], correctOptionIndex: 1, explanation: "Deforestation and water contamination are critical environmental problems (Page 571)." },
                { question: "What is the term for the long-term shift in global weather patterns?", options: ["Weather", "Climate", "Climate change", "Atmospheric pressure"], correctOptionIndex: 2, explanation: "Climate change refers to significant and lasting changes in global climate (Page 572)." },
                { question: "Which of the following is a cause of climate change?", options: ["Natural orbital variations only", "Volcanic eruptions only", "Human activities, primarily burning fossil fuels", "Solar flares only"], correctOptionIndex: 2, explanation: "Human-induced greenhouse gas emissions are the main driver (Page 573)." },
                { question: "What is the purpose of disaster management?", options: ["To ignore natural hazards.", "To prevent, prepare for, respond to, and recover from disasters.", "To create more disasters.", "To only provide relief after a disaster."], correctOptionIndex: 1, explanation: "Disaster management is a comprehensive cycle of activities (Page 574)." },
                { question: "Which of the following is a step in disaster preparedness?", options: ["Waiting for a disaster to strike.", "Developing evacuation plans and emergency kits.", "Ignoring warnings.", "Building in high-risk areas."], correctOptionIndex: 1, explanation: "Preparedness involves proactive measures like planning and stocking supplies (Page 575)." }
            ];
            quizQuestions.push(...socialStudiesMCQs);

            // English (25 MCQs from Pages 847-854)
            const englishMCQs = [
                { question: "Which of the following is a word that describes a noun or pronoun?", options: ["Verb", "Adverb", "Adjective", "Preposition"], correctOptionIndex: 2, explanation: "An adjective modifies or describes a noun or pronoun (Page 847)." },
                { question: "Identify the adjective in the sentence: \"The *blue* sky is beautiful.\"", options: ["The", "Blue", "Sky", "Beautiful"], correctOptionIndex: 1, explanation: "'Blue' describes the color of the sky (Page 847)." },
                { question: "What is the comparative form of the adjective 'happy'?", options: ["Happiest", "More happy", "Happier", "Most happy"], correctOptionIndex: 2, explanation: "The comparative form is used to compare two things (Page 848)." },
                { question: "Which of the following is the superlative form of the adjective 'bad'?", options: ["Badder", "Worse", "Worst", "Most bad"], correctOptionIndex: 2, explanation: "The superlative form is used to compare three or more things (Page 848)." },
                { question: "What is a verb?", options: ["A naming word.", "A word that describes an action or state of being.", "A word that connects sentences.", "A word that expresses emotion."], correctOptionIndex: 1, explanation: "Verbs express actions, occurrences, or states (Page 849)." },
                { question: "Identify the verb in the sentence: \"He *writes* a letter.\"", options: ["He", "Writes", "Letter", "None of these"], correctOptionIndex: 1, explanation: "'Writes' is the action performed (Page 849)." },
                { question: "Which of these is a linking verb?", options: ["Run", "Feel", "Jump", "Talk"], correctOptionIndex: 1, explanation: "Linking verbs connect the subject to a subject complement (Page 850)." },
                { question: "What is the past tense of the verb 'sing'?", options: ["Sings", "Singing", "Sang", "Sung"], correctOptionIndex: 2, explanation: "'Sang' is the simple past tense of 'sing' (Page 850)." },
                { question: "Which of the following is an irregular verb?", options: ["Walk - walked", "Study - studied", "Break - broke", "Clean - cleaned"], correctOptionIndex: 2, explanation: "Irregular verbs do not follow the standard -ed pattern for past tense (Page 851)." },
                { question: "What is the present participle of 'read'?", options: ["Read", "Reads", "Reading", "Red"], correctOptionIndex: 2, explanation: "The present participle ends in -ing (Page 851)." },
                { question: "Which of the following is an adverb?", options: ["Loud", "Fast", "Happily", "Friend"], correctOptionIndex: 2, explanation: "Adverbs often end in -ly and modify verbs, adjectives, or other adverbs (Page 852)." },
                { question: "Identify the adverb of manner in the sentence: \"She spoke *clearly*.\"", options: ["She", "Spoke", "Clearly", "None of these"], correctOptionIndex: 2, explanation: "'Clearly' describes how she spoke (Page 852)." },
                { question: "What is an adverb of time?", options: ["A word that tells where.", "A word that tells when.", "A word that tells how.", "A word that tells how often."], correctOptionIndex: 1, explanation: "Adverbs of time specify when an action occurs (Page 852)." },
                { question: "In the sentence, \"They will leave *soon*,\" what type of adverb is 'soon'?", options: ["Adverb of place", "Adverb of time", "Adverb of frequency", "Adverb of degree"], correctOptionIndex: 1, explanation: "'Soon' indicates the time of departure (Page 852)." },
                { question: "Which of the following is an adverb of place?", options: ["Often", "Early", "Upstairs", "Very"], correctOptionIndex: 2, explanation: "'Upstairs' indicates a location (Page 853)." },
                { question: "What is an adverb of frequency?", options: ["A word that tells where.", "A word that tells when.", "A word that tells how often.", "A word that tells to what extent."], correctOptionIndex: 2, explanation: "Adverbs of frequency indicate how often an action happens (Page 853)." },
                { question: "In the sentence, \"He *rarely* complains,\" what type of adverb is 'rarely'?", options: ["Adverb of time", "Adverb of place", "Adverb of frequency", "Adverb of degree"], correctOptionIndex: 2, explanation: "'Rarely' indicates how often he complains (Page 853)." },
                { question: "What is an adverb of degree?", options: ["A word that tells where.", "A word that tells when.", "A word that tells how.", "A word that tells to what extent or intensity."], correctOptionIndex: 3, explanation: "Adverbs of degree modify the intensity of an adjective, verb, or another adverb (Page 854)." },
                { question: "In the sentence, \"The test was *too* difficult,\" what type of adverb is 'too'?", options: ["Adverb of time", "Adverb of place", "Adverb of manner", "Adverb of degree"], correctOptionIndex: 3, explanation: "'Too' intensifies the adjective 'difficult' (Page 854)." },
                { question: "Which of these is a preposition?", options: ["And", "Quickly", "Behind", "Wow!"], correctOptionIndex: 2, explanation: "Prepositions show relationships of position, time, or direction (Page 854)." },
                { question: "Identify the prepositional phrase in the sentence: \"The cat slept *under the blanket*.\"", options: ["The cat", "Slept", "Under the blanket", "Blanket"], correctOptionIndex: 2, explanation: "A prepositional phrase begins with a preposition and ends with an object (Page 854)." },
                { question: "What is a conjunction?", options: ["A word that describes a noun.", "A word that shows action.", "A word that connects words, phrases, or clauses.", "A word that expresses emotion."], correctOptionIndex: 2, explanation: "Conjunctions link grammatical units (Page 854)." },
                { question: "Which of these is a coordinating conjunction?", options: ["Because", "Although", "Nor", "Since"], correctOptionIndex: 2, explanation: "'Nor' is one of the FANBOYS (For, And, Nor, But, Or, Yet, So) (Page 854)." },
                { question: "What is a subordinating conjunction?", options: ["A word that connects two independent clauses.", "A word that introduces a dependent clause.", "A word that shows strong emotion.", "A word that describes a verb."], correctOptionIndex: 1, explanation: "Subordinating conjunctions introduce dependent clauses (Page 854)." },
                { question: "Which of the following is an interjection?", options: ["And", "Quickly", "Hurray!", "Under"], correctOptionIndex: 2, explanation: "Interjections express sudden emotion (Page 854)." }
            ];
            quizQuestions.push(...englishMCQs);

            // Mathematics (25 MCQs from Pages 996-1002)
            const mathematicsMCQs = [
                { question: "What is the value of $1/4 + 1/8$?", options: ["2/12", "3/8", "1/2", "1/4"], correctOptionIndex: 1, explanation: "Common denominator is 8: $2/8 + 1/8 = 3/8$ (Page 996)." },
                { question: "Convert 0.6 into a percentage.", options: ["6%", "60%", "0.6%", "600%"], correctOptionIndex: 1, explanation: "$0.6 \\times 100 = 60\%$ (Page 997)." },
                { question: "If a car travels 240 km in 3 hours, what is its average speed?", options: ["60 km/h", "70 km/h", "80 km/h", "90 km/h"], correctOptionIndex: 2, explanation: "Speed = Distance / Time = 240 km / 3 hours = 80 km/h (Page 998)." },
                { question: "What is the area of a circle with a radius of 2 cm? (Use $\\pi = 3.14$)", options: ["6.28 cm²", "12.56 cm²", "25.12 cm²", "50.24 cm²"], correctOptionIndex: 1, explanation: "Area = $\\pi r^2 = 3.14 \\times 2^2 = 3.14 \\times 4 = 12.56$ cm² (Page 999)." },
                { question: "What is the volume of a sphere with a radius of 6 cm? (Use $\\pi = 3.14$)", options: ["113.04 cm³", "226.08 cm³", "452.16 cm³", "904.32 cm³"], correctOptionIndex: 3, explanation: "Volume = $4/3 \\pi r^3 = 4/3 \\times 3.14 \\times 6^3 = 4/3 \\times 3.14 \\times 216 = 4 \\times 3.14 \\times 72 = 904.32$ cm³ (Page 1000)." },
                { question: "Which of the following is a measure of spread?", options: ["Mean", "Median", "Mode", "Variance"], correctOptionIndex: 3, explanation: "Variance measures how far a set of numbers are spread out from their average value (Page 1001)." },
                { question: "What is the probability of rolling an odd number on a standard six-sided die?", options: ["1/6", "1/3", "1/2", "2/3"], correctOptionIndex: 2, explanation: "Odd numbers are 1, 3, 5 (3 outcomes). Total outcomes are 6. Probability = 3/6 = 1/2 (Page 1002)." },
                { question: "What is the value of $x$ in the equation $x/4 + 2 = 7$?", options: ["10", "15", "20", "25"], correctOptionIndex: 2, explanation: "$x/4 = 5$, so $x = 20$ (Page 996)." },
                { question: "Simplify the expression: $2x^2 + 5x - x^2 + 2x$", options: ["$x^2 + 7x$", "$3x^2 + 7x$", "$x^2 + 3x$", "$3x^2 + 3x$"], correctOptionIndex: 0, explanation: "Combine like terms: $(2x^2 - x^2) + (5x + 2x) = x^2 + 7x$ (Page 997)." },
                { question: "What is the value of $5/6 - 1/3$?", options: ["4/3", "1/2", "3/6", "2/3"], correctOptionIndex: 1, explanation: "Common denominator is 6: $5/6 - 2/6 = 3/6 = 1/2$ (Page 996)." },
                { question: "What is the surface area of a cone with radius 3 cm and slant height 5 cm? (Use $\\pi = 3.14$)", options: ["47.1 cm²", "75.36 cm²", "94.2 cm²", "113.04 cm²"], correctOptionIndex: 2, explanation: "Surface Area = $\\pi r(r + l) = 3.14 \\times 3 \\times (3 + 5) = 3.14 \\times 3 \\times 8 = 75.36$ cm² (Page 1000)." },
                { question: "How many sides does a decagon have?", options: ["8", "9", "10", "11"], correctOptionIndex: 2, explanation: "A decagon is a polygon with 10 sides (Page 999)." },
                { question: "What is the value of $2^6$?", options: ["12", "32", "64", "128"], correctOptionIndex: 2, explanation: "$2^6 = 2 \\times 2 \\times 2 \\times 2 \\times 2 \\times 2 = 64$ (Page 996)." },
                { question: "If the temperature is 20 degrees Celsius, what is it in Fahrenheit? (Formula: $F = C \\times 9/5 + 32$)", options: ["60°F", "68°F", "72°F", "76°F"], correctOptionIndex: 1, explanation: "$20 \\times 9/5 + 32 = 36 + 32 = 68°F$ (Page 1001)." },
                { question: "What is the area of a sector of a circle with radius 8 cm and central angle 45 degrees? (Use $\\pi = 3.14$)", options: ["12.56 cm²", "25.12 cm²", "50.24 cm²", "100.48 cm²"], correctOptionIndex: 1, explanation: "Area of sector = $(\\theta/360) \\times \\pi r^2 = (45/360) \\times 3.14 \\times 8^2 = 1/8 \\times 3.14 \\times 64 = 8 \\times 3.14 = 25.12$ cm² (Page 999)." },
                { question: "What is the slope of the line passing through points (0, 0) and (4, 8)?", options: ["1", "2", "3", "4"], correctOptionIndex: 1, explanation: "Slope = $(y_2 - y_1) / (x_2 - x_1) = (8 - 0) / (4 - 0) = 8 / 4 = 2$ (Page 998)." },
                { question: "Which of the following is a unit of energy?", options: ["Watt", "Newton", "Joule", "Ampere"], correctOptionIndex: 2, explanation: "Joule (J) is the SI unit of energy (Page 998)." },
                { question: "What is the value of $(x+y)^2$ if $x = 2$ and $y = 3$?", options: ["5", "10", "13", "25"], correctOptionIndex: 3, explanation: "$(2+3)^2 = 5^2 = 25$ (Page 997)." },
                { question: "What is the probability of drawing a black card from a standard deck of 52 playing cards?", options: ["1/4", "1/2", "3/4", "1/13"], correctOptionIndex: 1, explanation: "There are 26 black cards (clubs and spades) in a deck of 52. Probability = $26/52 = 1/2$ (Page 1002)." },
                { question: "What is the value of $5^4$?", options: ["20", "125", "625", "3125"], correctOptionIndex: 2, explanation: "$5^4 = 5 \\times 5 \\times 5 \\times 5 = 625$ (Page 996)." },
                { question: "Simplify the expression: $(x^3)^2$", options: ["$x^5$", "$x^6$", "$x^9$", "$2x^3$"], correctOptionIndex: 1, explanation: "When raising a power to a power, multiply the exponents: $x^{3 \\times 2} = x^6$ (Page 997)." },
                { question: "What is the perimeter of a regular nonagon with a side length of 4 cm?", options: ["32 cm", "36 cm", "40 cm", "44 cm"], correctOptionIndex: 1, explanation: "A nonagon has 9 sides, so perimeter = $9 \\times 4 = 36$ cm (Page 999)." },
                { question: "What is the volume of a cylinder with a radius of 2 cm and a height of 5 cm? (Use $\\pi = 3.14$)", options: ["31.4 cm³", "62.8 cm³", "94.2 cm³", "125.6 cm³"], correctOptionIndex: 1, explanation: "Volume = $\\pi r^2 h = 3.14 \\times 2^2 \\times 5 = 3.14 \\times 4 \\times 5 = 62.8$ cm³ (Page 1000)." },
                { question: "What is the mean of the following set of numbers: 1, 2, 3, 4, 5?", options: ["2", "3", "3.5", "4"], correctOptionIndex: 1, explanation: "Mean = $(1+2+3+4+5)/5 = 15/5 = 3$ (Page 1001)." },
                { question: "What is the median of the following set of numbers: 10, 20, 30, 40?", options: ["20", "25", "30", "35"], correctOptionIndex: 1, explanation: "Order the numbers: 10, 20, 30, 40. Median = $(20+30)/2 = 25$ (Page 1001)." }
            ];
            quizQuestions.push(...mathematicsMCQs);

            // Randomly select one special question
            specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
            quizQuestions[specialQuestionIndex].special = true;

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // Initialize the quiz when the script loads
        initializeQuiz();
    </script>
</body>
</html>
