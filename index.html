<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDUCATION DEPARTMENT SCREENING TEST PREPARATION â€“ JUNE 4, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 10vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #6D6875;
            margin-top: 0.5rem;
        }

        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }

        .option-button:hover:not(.selected) {
            background-color: #f0f0f0;
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        .timer-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-progress {
            font-size: 1rem;
            color: #6D6875;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
            }
            .top-bar .date-display {
                order: 2; /* Move date to bottom on mobile */
                font-size: 0.8rem;
            }
            .top-bar .whatsapp-link {
                order: 1; /* Move whatsapp to top on mobile */
                font-size: 0.8rem;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault()); // Disable right-click
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault(); // Disable Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J
            }
            if (e.key === 'F12') {
                e.preventDefault(); // Disable F12
            }
        });
        document.addEventListener('copy', event => event.preventDefault()); // Disable copy
        document.addEventListener('paste', event => event.preventDefault()); // Disable paste
    </script>

    <div class="top-bar">
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
        <div class="date-display" id="liveDate"></div>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/LXdkJVy8/20250524-0050-Empowering-Educators-remix-01jw0makvqewdvqns1te3jvpgs.png" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            KP Teacher Corps | PREPARED BY: SYED ASGHAR ALI SHAH | Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "JUNE 4, 2025"; // MANDATORY DAILY INPUT
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Update header dates
        document.getElementById('liveDate').textContent = CURRENT_DATE_STR;
        document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
        document.getElementById('quizTitle').textContent = `EDUCATION DEPARTMENT SCREENING TEST PREPARATION â€“ ${CURRENT_DATE_STR}`;

        // Quiz Data Structure
        const quizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 40;
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "35 minutes 10 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} â€“ ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date().toDateString();
            if (question.special && CURRENT_DATE.toDateString() === today) {
                quizCard.classList.add('special-question');
            }

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                button.dataset.optionIndex = index;
                button.onclick = () => selectOption(index);

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === index) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionIndex - The index of the selected option.
         */
        function selectOption(selectedOptionIndex) {
            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button, index) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('selected', 'correct', 'incorrect'); // Clear previous states

                if (index === selectedOptionIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.isCorrect) {
                    correctCount++;
                } else if (answer && answer.selectedOptionIndex !== undefined) {
                    incorrectCount++;
                }
            });

            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount} / ${userAnswers.length}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount} / ${userAnswers.length}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpojgab', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            if (id === 'day9' && password === '1122') {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // Pedagogy (10 MCQs from Pages 33-36)
            const pedagogyMCQs = [
                { question: "Which of the following is a key principle of constructivist learning?", options: ["Learners passively receive information.", "Knowledge is constructed by learners through experience.", "Rote memorization is the primary learning method.", "Teachers transmit knowledge directly to students."], correctOptionIndex: 1, explanation: "Constructivism emphasizes active knowledge construction by learners (Page 33)." },
                { question: "What is the role of the teacher in a constructivist classroom?", options: ["To be the sole source of information.", "To facilitate learning and guide student inquiry.", "To dictate all activities.", "To avoid interaction with students."], correctOptionIndex: 1, explanation: "Teachers in constructivist settings act as facilitators and guides (Page 33)." },
                { question: "Which of the following is a benefit of problem-based learning?", options: ["It focuses on isolated facts.", "It promotes critical thinking and real-world application.", "It requires minimal student effort.", "It discourages collaboration."], correctOptionIndex: 1, explanation: "Problem-based learning develops critical thinking and problem-solving skills (Page 34)." },
                { question: "What is the purpose of differentiated instruction?", options: ["To teach all students the same way.", "To cater to the diverse learning needs of students.", "To make lessons easier for the teacher.", "To reduce student engagement."], correctOptionIndex: 1, explanation: "Differentiated instruction tailors teaching to meet individual student needs (Page 34)." },
                { question: "Which of the following is an example of a higher-order thinking skill?", options: ["Recalling facts", "Defining terms", "Evaluating arguments", "Listing items"], correctOptionIndex: 2, explanation: "Evaluating, analyzing, and creating are higher-order thinking skills (Page 35)." },
                { question: "What is the role of metacognition in learning?", options: ["It is irrelevant to learning.", "It refers to thinking about one's own thinking and learning processes.", "It is only about memorization.", "It is a form of passive learning."], correctOptionIndex: 1, explanation: "Metacognition involves awareness and control over one's cognitive processes (Page 35)." },
                { question: "Which learning theory focuses on observable behaviors and how they are shaped by reinforcement and punishment?", options: ["Cognitivism", "Humanism", "Behaviorism", "Constructivism"], correctOptionIndex: 2, explanation: "Behaviorism (Skinner, Pavlov, Watson) emphasizes environmental influences on behavior (Page 36)." },
                { question: "According to Maslow's Hierarchy of Needs, which needs must be met before higher-level needs can be addressed?", options: ["Self-actualization needs", "Esteem needs", "Physiological needs", "Belongingness and love needs"], correctOptionIndex: 2, explanation: "Physiological needs (food, water, shelter) are the most basic and must be met first (Page 36)." },
                { question: "Which of the following is a characteristic of a humanistic approach to education?", options: ["Teacher-centered instruction", "Emphasis on standardized tests", "Focus on student's self-actualization and personal growth", "Strict discipline and rote learning"], correctOptionIndex: 2, explanation: "Humanistic education prioritizes individual potential and self-fulfillment (Page 36)." },
                { question: "What is the purpose of educational psychology?", options: ["To study animal behavior.", "To apply psychological principles to understand and improve teaching and learning.", "To diagnose mental illnesses.", "To develop new psychological theories."], correctOptionIndex: 1, explanation: "Educational psychology bridges psychology and education to optimize learning (Page 36)." }
            ];
            quizQuestions.push(...pedagogyMCQs);

            // General Science (25 MCQs from Pages 225-242)
            const generalScienceMCQs = [
                { question: "What is the chemical symbol for Potassium?", options: ["Po", "K", "Pt", "Pm"], correctOptionIndex: 1, explanation: "K is the chemical symbol for Potassium (Page 225)." },
                { question: "Which of the following is an element?", options: ["Water", "Salt", "Oxygen", "Sugar"], correctOptionIndex: 2, explanation: "Oxygen is a pure element (Page 226)." },
                { question: "What is the process by which water vapor in the air changes into liquid water droplets, forming clouds?", options: ["Evaporation", "Precipitation", "Condensation", "Transpiration"], correctOptionIndex: 2, explanation: "Condensation is the process of gas turning into liquid (Page 227)." },
                { question: "Which of the following is a form of precipitation?", options: ["Cloud", "Fog", "Rain", "Humidity"], correctOptionIndex: 2, explanation: "Rain is liquid precipitation (Page 228)." },
                { question: "What is the process by which water from the Earth's surface evaporates, forms clouds, and falls back as precipitation?", options: ["Carbon cycle", "Nitrogen cycle", "Water cycle", "Rock cycle"], correctOptionIndex: 2, explanation: "The water cycle describes the continuous movement of water on, above, and below the surface of the Earth (Page 229)." },
                { question: "Which of the following is a major component of the Earth's atmosphere?", options: ["Water", "Nitrogen", "Carbon", "Iron"], correctOptionIndex: 1, explanation: "Nitrogen makes up about 78% of Earth's atmosphere (Page 230)." },
                { question: "What is the layer of the atmosphere closest to Earth's surface, where most weather occurs?", options: ["Stratosphere", "Mesosphere", "Troposphere", "Thermosphere"], correctOptionIndex: 2, explanation: "The troposphere is the lowest layer of the atmosphere (Page 231)." },
                { question: "Which layer of the atmosphere contains the ozone layer, which protects Earth from harmful UV radiation?", options: ["Troposphere", "Stratosphere", "Mesosphere", "Thermosphere"], correctOptionIndex: 1, explanation: "The ozone layer is found in the stratosphere (Page 232)." },
                { question: "What is the primary cause of wind?", options: ["Moon's gravity", "Earth's rotation", "Differences in air pressure", "Ocean currents"], correctOptionIndex: 2, explanation: "Wind is caused by air moving from high pressure to low pressure areas (Page 233)." },
                { question: "Which of the following is a type of severe storm characterized by a rotating column of air?", options: ["Hurricane", "Blizzard", "Tornado", "Monsoon"], correctOptionIndex: 2, explanation: "A tornado is a violent rotating column of air (Page 234)." },
                { question: "What is the primary cause of tides?", options: ["Wind", "Earthquakes", "Gravitational pull of the Moon and Sun", "Ocean currents"], correctOptionIndex: 2, explanation: "Tides are caused by the gravitational forces of the Moon and Sun (Page 235)." },
                { question: "Which of the following is a major ocean current that influences global climate?", options: ["Amazon River", "Gulf Stream", "Nile River", "Mississippi River"], correctOptionIndex: 1, explanation: "The Gulf Stream is a warm ocean current that affects climate (Page 236)." },
                { question: "What is the process by which rocks are broken down into smaller pieces by physical or chemical means?", options: ["Erosion", "Deposition", "Weathering", "Sedimentation"], correctOptionIndex: 2, explanation: "Weathering is the breakdown of rocks (Page 237)." },
                { question: "Which of the following is an example of chemical weathering?", options: ["Freezing and thawing of water", "Abrasion by wind", "Acid rain dissolving limestone", "Root growth in cracks"], correctOptionIndex: 2, explanation: "Acid rain causes chemical changes in rocks (Page 238)." },
                { question: "What is the process by which weathered rock and soil are transported from one location to another?", options: ["Weathering", "Deposition", "Erosion", "Sedimentation"], correctOptionIndex: 2, explanation: "Erosion is the movement of weathered material (Page 239)." },
                { question: "Which of the following is a major agent of erosion?", options: ["Sunlight", "Wind", "Temperature", "Gravity"], correctOptionIndex: 1, explanation: "Wind, water, ice, and gravity are agents of erosion (Page 240)." },
                { question: "What is the process by which eroded materials are laid down or settled in a new location?", options: ["Weathering", "Erosion", "Deposition", "Transportation"], correctOptionIndex: 2, explanation: "Deposition is the dropping of sediments (Page 241)." },
                { question: "Which of the following is an example of deposition?", options: ["Formation of canyons", "Formation of sand dunes", "Breaking of rocks", "Movement of glaciers"], correctOptionIndex: 1, explanation: "Sand dunes are formed by the deposition of wind-blown sand (Page 242)." },
                { question: "What is the chemical symbol for Calcium?", options: ["Ca", "Cl", "Co", "Cm"], correctOptionIndex: 0, explanation: "Ca is the chemical symbol for Calcium (Page 225)." },
                { question: "Which of the following is a compound?", options: ["Iron", "Gold", "Water", "Helium"], correctOptionIndex: 2, explanation: "Water ($\\text{H}_2\\text{O}$) is a compound (Page 226)." },
                { question: "What is the primary source of energy for the water cycle?", options: ["Earth's core", "Moon's gravity", "Sun's energy", "Volcanic activity"], correctOptionIndex: 2, explanation: "Solar energy drives evaporation in the water cycle (Page 229)." },
                { question: "Which atmospheric layer is responsible for burning up most meteors?", options: ["Troposphere", "Stratosphere", "Mesosphere", "Thermosphere"], correctOptionIndex: 2, explanation: "Meteors burn up in the mesosphere due to friction (Page 231)." },
                { question: "What is the instrument used to measure wind speed?", options: ["Barometer", "Thermometer", "Anemometer", "Hydrometer"], correctOptionIndex: 2, explanation: "An anemometer measures wind speed (Page 233)." },
                { question: "Which type of rock is formed from the cooling and solidification of molten magma or lava?", options: ["Sedimentary", "Metamorphic", "Igneous", "Fossil"], correctOptionIndex: 2, explanation: "Igneous rocks are formed from solidified magma or lava (Page 237)." },
                { question: "What is the process that forms V-shaped valleys?", options: ["Wind erosion", "Glacial erosion", "River erosion", "Coastal erosion"], correctOptionIndex: 2, explanation: "Rivers typically form V-shaped valleys through erosion (Page 239)." }
            ];
            quizQuestions.push(...generalScienceMCQs);

            // Social Studies (15 MCQs from Pages 579-596)
            const socialStudiesMCQs = [
                { question: "Which of the following is a major challenge to good governance in Pakistan?", options: ["High transparency", "Rule of law", "Corruption and lack of accountability", "Efficient public services"], correctOptionIndex: 2, explanation: "Corruption and lack of accountability undermine good governance (Page 579)." },
                { question: "What is the term for the process of making government more open, honest, and answerable to its citizens?", options: ["Bureaucracy", "Autocracy", "Transparency and accountability", "Centralization"], correctOptionIndex: 2, explanation: "Transparency and accountability are key to good governance (Page 580)." },
                { question: "Which of the following is a characteristic of an effective public service delivery system?", options: ["Slow and inefficient", "Responsive and citizen-centric", "Corrupt and inaccessible", "Bureaucratic and rigid"], correctOptionIndex: 1, explanation: "Effective public services are responsive to citizen needs (Page 581)." },
                { question: "What is the role of civil society organizations (CSOs) in promoting good governance?", options: ["To control the government.", "To monitor government actions and advocate for citizen rights.", "To replace government functions.", "To engage in political campaigns only."], correctOptionIndex: 1, explanation: "CSOs play a vital role in oversight and advocacy (Page 582)." },
                { question: "Which of the following is a fundamental right of citizens in a democratic country?", options: ["Right to unlimited wealth", "Right to privacy", "Right to avoid taxes", "Right to break laws"], correctOptionIndex: 1, explanation: "The right to privacy is a fundamental human right (Page 583)." },
                { question: "What is the term for the protection of individuals from arbitrary interference by the state or other powerful entities?", options: ["Oppression", "Liberty", "Censorship", "Surveillance"], correctOptionIndex: 1, explanation: "Liberty refers to freedom from arbitrary control (Page 584)." },
                { question: "Which of the following is a major challenge to human rights in Pakistan?", options: ["Strong legal framework", "Widespread awareness of rights", "Discrimination and violence against minorities", "Effective enforcement mechanisms"], correctOptionIndex: 2, explanation: "Discrimination and violence against vulnerable groups are significant human rights issues (Page 585)." },
                { question: "What is the purpose of human rights education?", options: ["To promote intolerance.", "To teach people about their rights and responsibilities.", "To discourage civic participation.", "To justify human rights abuses."], correctOptionIndex: 1, explanation: "Human rights education fosters awareness and respect for rights (Page 586)." },
                { question: "Which of the following is a major cause of social inequality?", options: ["Equal access to education", "Fair distribution of resources", "Discrimination based on gender, class, or ethnicity", "Merit-based systems"], correctOptionIndex: 2, explanation: "Discrimination and unequal opportunities contribute to social inequality (Page 587)." },
                { question: "What is the term for the fair and equitable distribution of resources and opportunities within a society?", options: ["Inequality", "Poverty", "Social justice", "Exploitation"], correctOptionIndex: 2, explanation: "Social justice aims for fairness in society (Page 588)." },
                { question: "Which of the following is a major challenge to achieving social justice in Pakistan?", options: ["Strong social safety nets", "Widespread poverty and illiteracy", "Effective legal aid systems", "Active civil society"], correctOptionIndex: 1, explanation: "Poverty and illiteracy exacerbate social injustice (Page 589)." },
                { question: "What is the purpose of social welfare programs?", options: ["To increase poverty.", "To provide assistance to vulnerable individuals and families.", "To reduce public services.", "To promote unemployment."], correctOptionIndex: 1, explanation: "Social welfare programs aim to support those in need (Page 590)." },
                { question: "Which of the following is a major challenge to peace and stability in the region?", options: ["Regional cooperation", "Economic integration", "Terrorism and extremism", "Diplomatic dialogue"], correctOptionIndex: 2, explanation: "Terrorism and extremism pose significant threats to peace (Page 591)." },
                { question: "What is the term for the use of violence and intimidation, especially against civilians, in the pursuit of political aims?", options: ["Diplomacy", "Negotiation", "Terrorism", "Mediation"], correctOptionIndex: 2, explanation: "Terrorism is the use of violence for political goals (Page 592)." },
                { question: "Which of the following is a strategy to promote peace and stability?", options: ["Escalating conflicts", "Promoting dialogue and conflict resolution", "Ignoring international law", "Supporting extremist groups"], correctOptionIndex: 1, explanation: "Dialogue and peaceful resolution are key to fostering peace (Page 593)." }
            ];
            quizQuestions.push(...socialStudiesMCQs);

            // English (25 MCQs from Pages 855-862)
            const englishMCQs = [
                { question: "Which of the following is a word that describes a noun or pronoun?", options: ["Verb", "Adverb", "Adjective", "Conjunction"], correctOptionIndex: 2, explanation: "An adjective modifies or describes a noun or pronoun (Page 855)." },
                { question: "Identify the adjective in the sentence: \"The *green* grass is soft.\"", options: ["The", "Green", "Grass", "Soft"], correctOptionIndex: 1, explanation: "'Green' describes the color of the grass (Page 855)." },
                { question: "What is the comparative form of the adjective 'big'?", options: ["Biggest", "More big", "Bigger", "Most big"], correctOptionIndex: 2, explanation: "The comparative form is used to compare two things (Page 856)." },
                { question: "Which of the following is the superlative form of the adjective 'little'?", options: ["Littler", "Less", "Least", "Most little"], correctOptionIndex: 2, explanation: "The superlative form is used to compare three or more things (Page 856)." },
                { question: "What is a verb?", options: ["A naming word.", "A word that describes an action or state of being.", "A word that connects sentences.", "A word that expresses emotion."], correctOptionIndex: 1, explanation: "Verbs express actions, occurrences, or states (Page 857)." },
                { question: "Identify the verb in the sentence: \"They *play* football.\"", options: ["They", "Play", "Football", "None of these"], correctOptionIndex: 1, explanation: "'Play' is the action performed (Page 857)." },
                { question: "Which of these is a linking verb?", options: ["Run", "Become", "Jump", "Talk"], correctOptionIndex: 1, explanation: "Linking verbs connect the subject to a subject complement (Page 858)." },
                { question: "What is the past tense of the verb 'see'?", options: ["Sees", "Seeing", "Saw", "Seen"], correctOptionIndex: 2, explanation: "'Saw' is the simple past tense of 'see' (Page 858)." },
                { question: "Which of the following is an irregular verb?", options: ["Walk - walked", "Listen - listened", "Go - went", "Clean - cleaned"], correctOptionIndex: 2, explanation: "Irregular verbs do not follow the standard -ed pattern for past tense (Page 859)." },
                { question: "What is the present participle of 'write'?", options: ["Wrote", "Writes", "Writing", "Written"], correctOptionIndex: 2, explanation: "The present participle ends in -ing (Page 859)." },
                { question: "Which of the following is an adverb?", options: ["Slow", "Happy", "Carefully", "Friendship"], correctOptionIndex: 2, explanation: "Adverbs often end in -ly and modify verbs, adjectives, or other adverbs (Page 860)." },
                { question: "Identify the adverb of manner in the sentence: \"He drove *fast*.\"", options: ["He", "Drove", "Fast", "None of these"], correctOptionIndex: 2, explanation: "'Fast' describes how he drove (Page 860)." },
                { question: "What is an adverb of time?", options: ["A word that tells where.", "A word that tells when.", "A word that tells how.", "A word that tells how often."], correctOptionIndex: 1, explanation: "Adverbs of time specify when an action occurs (Page 860)." },
                { question: "In the sentence, \"She arrived *late*,\" what type of adverb is 'late'?", options: ["Adverb of place", "Adverb of time", "Adverb of frequency", "Adverb of degree"], correctOptionIndex: 1, explanation: "'Late' indicates the time of arrival (Page 860)." },
                { question: "Which of the following is an adverb of place?", options: ["Always", "Never", "Downstairs", "Quite"], correctOptionIndex: 2, explanation: "'Downstairs' indicates a location (Page 861)." },
                { question: "What is an adverb of frequency?", options: ["A word that tells where.", "A word that tells when.", "A word that tells how often.", "A word that tells to what extent."], correctOptionIndex: 2, explanation: "Adverbs of frequency indicate how often an action happens (Page 861)." },
                { question: "In the sentence, \"They *seldom* visit us,\" what type of adverb is 'seldom'?", options: ["Adverb of time", "Adverb of place", "Adverb of frequency", "Adverb of degree"], correctOptionIndex: 2, explanation: "'Seldom' indicates how often they visit (Page 861)." },
                { question: "What is an adverb of degree?", options: ["A word that tells where.", "A word that tells when.", "A word that tells how.", "A word that tells to what extent or intensity."], correctOptionIndex: 3, explanation: "Adverbs of degree modify the intensity of an adjective, verb, or another adverb (Page 862)." },
                { question: "In the sentence, \"He was *extremely* tired,\" what type of adverb is 'extremely'?", options: ["Adverb of time", "Adverb of place", "Adverb of manner", "Adverb of degree"], correctOptionIndex: 3, explanation: "'Extremely' intensifies the adjective 'tired' (Page 862)." },
                { question: "Which of these is a preposition?", options: ["And", "Quickly", "Near", "Wow!"], correctOptionIndex: 2, explanation: "Prepositions show relationships of position, time, or direction (Page 862)." },
                { question: "Identify the prepositional phrase in the sentence: \"She sat *by the window*.\"", options: ["She sat", "By the window", "Window", "Sat"], correctOptionIndex: 1, explanation: "A prepositional phrase begins with a preposition and ends with an object (Page 862)." },
                { question: "What is a conjunction?", options: ["A word that describes a noun.", "A word that shows action.", "A word that connects words, phrases, or clauses.", "A word that expresses emotion."], correctOptionIndex: 2, explanation: "Conjunctions link grammatical units (Page 862)." },
                { question: "Which of these is a coordinating conjunction?", options: ["Because", "Although", "Or", "Since"], correctOptionIndex: 2, explanation: "'Or' is one of the FANBOYS (For, And, Nor, But, Or, Yet, So) (Page 862)." },
                { question: "What is a subordinating conjunction?", options: ["A word that connects two independent clauses.", "A word that introduces a dependent clause.", "A word that shows strong emotion.", "A word that describes a verb."], correctOptionIndex: 1, explanation: "Subordinating conjunctions introduce dependent clauses (Page 862)." },
                { question: "Which of the following is an interjection?", options: ["And", "Quickly", "Alas!", "Under"], correctOptionIndex: 2, explanation: "Interjections express sudden emotion (Page 862)." }
            ];
            quizQuestions.push(...englishMCQs);

            // Mathematics (25 MCQs from Pages 1003-1009)
            const mathematicsMCQs = [
                { question: "What is the value of $2/5 + 1/10$?", options: ["3/15", "5/10", "1/2", "3/5"], correctOptionIndex: 2, explanation: "Common denominator is 10: $4/10 + 1/10 = 5/10 = 1/2$ (Page 1003)." },
                { question: "Convert 0.85 into a percentage.", options: ["8.5%", "85%", "0.85%", "850%"], correctOptionIndex: 1, explanation: "$0.85 \\times 100 = 85\%$ (Page 1004)." },
                { question: "If a cyclist travels 150 km in 5 hours, what is their average speed?", options: ["20 km/h", "25 km/h", "30 km/h", "35 km/h"], correctOptionIndex: 2, explanation: "Speed = Distance / Time = 150 km / 5 hours = 30 km/h (Page 1005)." },
                { question: "What is the area of a square with a diagonal of 10 cm?", options: ["25 cmÂ²", "50 cmÂ²", "75 cmÂ²", "100 cmÂ²"], correctOptionIndex: 1, explanation: "Area of square = $d^2/2 = 10^2/2 = 100/2 = 50$ cmÂ² (Page 1006)." },
                { question: "What is the volume of a sphere with a radius of 3 cm? (Use $\\pi = 3.14$)", options: ["28.26 cmÂ³", "56.52 cmÂ³", "84.78 cmÂ³", "113.04 cmÂ³"], correctOptionIndex: 3, explanation: "Volume = $4/3 \\pi r^3 = 4/3 \\times 3.14 \\times 3^3 = 4/3 \\times 3.14 \\times 27 = 4 \\times 3.14 \\times 9 = 113.04$ cmÂ³ (Page 1007)." },
                { question: "Which of the following is a measure of variability?", options: ["Mean", "Median", "Mode", "Standard Deviation"], correctOptionIndex: 3, explanation: "Standard deviation measures the average distance of data points from the mean (Page 1008)." },
                { question: "What is the probability of drawing a red ace from a standard deck of 52 playing cards?", options: ["1/52", "2/52", "4/52", "1/26"], correctOptionIndex: 1, explanation: "There are two red aces (Heart Ace, Diamond Ace). Probability = $2/52 = 1/26$ (Page 1009)." },
                { question: "What is the value of $x$ in the equation $2x + 8 = 20$?", options: ["4", "6", "8", "10"], correctOptionIndex: 1, explanation: "$2x = 12$, so $x = 6$ (Page 1003)." },
                { question: "Simplify the expression: $4(a - 3b) + 2b$", options: ["$4a - 10b$", "$4a - 14b$", "$4a - b$", "$4a + b$"], correctOptionIndex: 0, explanation: "$4a - 12b + 2b = 4a - 10b$ (Page 1004)." },
                { question: "What is the value of $7/8 - 1/4$?", options: ["5/8", "6/8", "3/4", "1/2"], correctOptionIndex: 0, explanation: "Common denominator is 8: $7/8 - 2/8 = 5/8$ (Page 1003)." },
                { question: "What is the surface area of a rectangular pyramid with a base of 4 cm by 5 cm and slant heights such that the total surface area is 100 cmÂ²?", options: ["40 cmÂ²", "60 cmÂ²", "80 cmÂ²", "100 cmÂ²"], correctOptionIndex: 3, explanation: "The question provides the total surface area as 100 cmÂ² (Page 1007)." },
                { question: "How many sides does a hendecagon have?", options: ["10", "11", "12", "13"], correctOptionIndex: 1, explanation: "A hendecagon is a polygon with 11 sides (Page 1006)." },
                { question: "What is the value of $3^4$?", options: ["9", "27", "81", "243"], correctOptionIndex: 2, explanation: "$3^4 = 3 \\times 3 \\times 3 \\times 3 = 81$ (Page 1003)." },
                { question: "If the temperature is 30 degrees Celsius, what is it in Fahrenheit? (Formula: $F = C \\times 9/5 + 32$)", options: ["86Â°F", "90Â°F", "94Â°F", "98Â°F"], correctOptionIndex: 0, explanation: "$30 \\times 9/5 + 32 = 54 + 32 = 86Â°F$ (Page 1008)." },
                { question: "What is the area of a sector of a circle with radius 10 cm and central angle 90 degrees? (Use $\\pi = 3.14$)", options: ["31.4 cmÂ²", "78.5 cmÂ²", "157 cmÂ²", "314 cmÂ²"], correctOptionIndex: 1, explanation: "Area of sector = $(\\theta/360) \\times \\pi r^2 = (90/360) \\times 3.14 \\times 10^2 = 1/4 \\times 3.14 \\times 100 = 78.5$ cmÂ² (Page 1006)." },
                { question: "What is the slope of the line passing through points (1, 2) and (3, 6)?", options: ["1", "2", "3", "4"], correctOptionIndex: 1, explanation: "Slope = $(y_2 - y_1) / (x_2 - x_1) = (6 - 2) / (3 - 1) = 4 / 2 = 2$ (Page 1005)." },
                { question: "Which of the following is a unit of power?", options: ["Joule", "Newton", "Watt", "Volt"], correctOptionIndex: 2, explanation: "Watt (W) is the SI unit of power (Page 1005)." },
                { question: "What is the value of $(a-b)^2$ if $a = 5$ and $b = 2$?", options: ["3", "9", "25", "49"], correctOptionIndex: 1, explanation: "$(5-2)^2 = 3^2 = 9$ (Page 1004)." },
                { question: "What is the probability of drawing a face card (King, Queen, Jack) from a standard deck of 52 playing cards?", options: ["3/52", "6/52", "12/52", "1/4"], correctOptionIndex: 2, explanation: "There are 12 face cards (3 per suit x 4 suits). Probability = $12/52 = 3/13$ (Page 1009)." },
                { question: "What is the value of $7^3$?", options: ["21", "49", "343", "2401"], correctOptionIndex: 2, explanation: "$7^3 = 7 \\times 7 \\times 7 = 343$ (Page 1003)." },
                { question: "Simplify the expression: $x^5 / x^2$", options: ["$x^7$", "$x^3$", "$x^{10}$", "$1/x^3$"], correctOptionIndex: 1, explanation: "When dividing powers with the same base, subtract the exponents: $x^{5-2} = x^3$ (Page 1004)." },
                { question: "What is the perimeter of a regular dodecagon with a side length of 5 cm?", options: ["50 cm", "60 cm", "70 cm", "80 cm"], correctOptionIndex: 1, explanation: "A dodecagon has 12 sides, so perimeter = $12 \\times 5 = 60$ cm (Page 1006)." },
                { question: "What is the volume of a rectangular prism with length 6 cm, width 3 cm, and height 2 cm?", options: ["18 cmÂ³", "24 cmÂ³", "36 cmÂ³", "48 cmÂ³"], correctOptionIndex: 2, explanation: "Volume = Length Ã— Width Ã— Height = $6 \\times 3 \\times 2 = 36$ cmÂ³ (Page 1007)." },
                { question: "What is the median of the following set of numbers: 2, 5, 8, 1, 4?", options: ["2", "3", "4", "5"], correctOptionIndex: 2, explanation: "Order the numbers: 1, 2, 4, 5, 8. The middle number is 4 (Page 1008)." },
                { question: "What is the mode of the following set of numbers: 7, 2, 5, 2, 7, 8, 2?", options: ["5", "7", "8", "2"], correctOptionIndex: 3, explanation: "The mode is the number that appears most frequently, which is 2 (Page 1008)." }
            ];
            quizQuestions.push(...mathematicsMCQs);

            // Randomly select one special question
            specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
            quizQuestions[specialQuestionIndex].special = true;

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // Initialize the quiz when the script loads
        initializeQuiz();
    </script>
</body>
</html>
s